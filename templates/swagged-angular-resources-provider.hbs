(function(angular) {
  'use strict';

  angular
    .module('{{angularModuleName}}', [
      require('angular-resource')
    ])
    {{#if stripTrailingSlashes}}
    .config(function($resourceProvider) {
      $resourceProvider.defaults.stripTrailingSlashes = false;
    })
    {{/if}}
    {{#each resourceOperations}}
    .{{../angularProviderType}}('{{capitalize @key}}{{../angularProviderSuffix}}', function() {
      this.$get = function($resource, apiUrl) {
        return $resource(null, null, {
          {{#each this}}
          {{nickname}}: {
            method: '{{action}}',
            url: apiUrl + '{{path}}',
            {{#if pathParameters}}
            params: {
              {{#each pathParameters}}
              '{{name}}': '@{{name}}',
              {{/each}}
            },
            {{/if}}
            {{#isQuery}}
            isArray: true,
            {{/isQuery}}
          },
          {{/each}}
        });
      };
    })
    {{/each}};

    module.exports = '{{angularModuleName}}';
})(angular);
