(function(angular) {
  'use strict';

  var moduleName = '{{ngModule}}';

  angular
    .module(moduleName, [
      require('angular-resource')
    ])
    {{#if stripTrailingSlashes}}
    .config(function($resourceProvider) {
      $resourceProvider.defaults.stripTrailingSlashes = false;
    })
    {{/if}}
    {{#each resourceOperations}}
    .{{../angularProviderType}}('{{capitalize @key}}{{../angularProviderSuffix}}', function() {
      {{#if ../ngdoc}}
      /**
      * @ngdoc service
      * @name {{../../ngModule}}.{{capitalize @key}}{{../angularProviderSuffix}}
      * @requires $resource
      * @requires apiUrl
      **/
      {{/if}}
      this.$get = function($resource, apiUrl) {
        return $resource(null, null, {
          {{#each this}}
          {{#if ../../ngdoc}}
          /**
          * @ngdoc method
          * @name {{../../../ngModule}}.{{capitalize @key}}{{../../../angularProviderSuffix}}.method:{{nickname}}
          * @methodOf {{../../../ngModule}}.{{capitalize @key}}{{../../../angularProviderSuffix}}
          * @description
          * {{summary}}
          **/
          {{/if}}
          {{nickname}}: {
            method: '{{action}}',
            url: apiUrl + '{{path}}',
            {{#if pathParameters}}
            params: {
              {{#each pathParameters}}
              '{{name}}': '@{{name}}',
              {{/each}}
            },
            {{/if}}
            {{#isQuery}}
            isArray: true,
            {{/isQuery}}
          },
          {{/each}}
        });
      };
    })
    {{/each}};

    module.exports = moduleName;
})angular));
